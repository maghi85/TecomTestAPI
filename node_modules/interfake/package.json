{
  "name": "interfake",
  "preferGlobal": true,
  "version": "1.3.0",
  "author": {
    "name": "Daniel Hough",
    "email": "daniel.hough@gmail.com"
  },
  "description": "A simple way to create dummy APIs",
  "contributors": [
    {
      "name": "Daniel Hough",
      "email": "daniel.hough@gmail.com",
      "url": "http://danielhough.co.uk"
    }
  ],
  "scripts": {
    "test": "mocha tests/*.test.js --reporter spec"
  },
  "files": [
    "example-apis",
    "index.js",
    "lib"
  ],
  "keywords": [
    "cli",
    "http",
    "server",
    "mocking",
    "mocks",
    "testing",
    "api",
    "rest"
  ],
  "repository": {
    "type": "git",
    "url": "git@github.com:basicallydan/interfake.git"
  },
  "dependencies": {
    "express": "^3.4.8",
    "commander": "2.1.0"
  },
  "license": "MIT",
  "engines": {
    "node": ">=0.6"
  },
  "main": "./lib/server.js",
  "bin": {
    "interfake": "./index.js"
  },
  "devDependencies": {
    "api-easy": "^0.3.8",
    "mocha": "^1.18.0",
    "request": "^2.34.0",
    "q": "^1.0.1",
    "zombie": "^2.0.0-alpha31",
    "connect": "^2.14.2"
  },
  "readme": "# Interfake: Quick JSON APIs\n\nInterfake is a tool which allows developers of client-side applications of *any* platform to easily create dummy HTTP APIs to develop against. Let's get started with a simple example.\n\n## Get started\n\nIf you don't want to use the JavaScript method to create your Interfake API, go read up on [all the methods](#three-ways-to-use-interfake). Otherwise, read on.\n\nInstall Interfake in your project.\n\n```\nnpm install interfake --save\n```\n\nLet's write a simple fake API:\n\n```js\nvar Interfake = require('interfake');\nvar interfake = new Interfake();\ninterfake.get('/whats-next').body({ next : 'more stuff '});\ninterfake.listen(3000); // The server will listen on port 3000\n```\n\nNow go to http://localhost:3000/whats-next in your browser (or [`curl`](http://curl.haxx.se)), and you will see the following:\n\n```json\n{\n\t\"next\":\"more stuff\"\n}\n```\n\nYou can also chain response properties:\n\n```js\nvar Interfake = require('interfake');\nvar interfake = new Interfake();\ninterfake.get('/whats-next').status(400).body({ error : 'such a bad request'});\ninterfake.listen(3000);\n\n/*\n# Request:\ncurl http://localhost:3000/whats-next -X GET\n# Response:\n400\n{\n\t\"error\":\"such a bad request\"\n}\n*/\n```\n\nYou can use different HTTP methods:\n\n```js\nvar Interfake = require('interfake');\nvar interfake = new Interfake();\ninterfake.post('/next-items').status(201).body({ created : true });\ninterfake.listen(3000);\n\n/*\n# Request:\ncurl http://localhost:3000/next-items -X POST\n# Response:\n201\n{\n\t\"created\":true\n}\n*/\n```\n\nAnd you can specify endpoints which should only be created once other ones have been hit (conditional endpoints):\n\n```js\nvar Interfake = require('interfake');\nvar interfake = new Interfake();\nvar postResponse = interfake.post('/next-items').status(201).body({ created : true });\npostResponse.creates.get('/items/1').status(200).body({ id: 1, name: 'Item 1' });\npostResponse.creates.get('/next-items').status(200).body({ items: [ { id: 1, name: 'Item 1' } ] });\ninterfake.listen(3000);\n\n/*\n# Request:\ncurl http://localhost:3000/next-items -X POST\n# Response:\n201\n{\n\t\"created\":true\n}\n\n\n# Request:\ncurl http://localhost:3000/items/1 -X GET\n# Response:\n200\n{\n\t\"id\":1\n\t\"name\":\"Item 1\"\n}\n*/\n```\n\nFor JavaScript developers\n\n---\n\n## Three ways to use Interfake\n\nInterfake can handle complex API structures, mutable endpoints and has three interfaces: the [JavaScript API](#method-1-javascript) (useful for NodeJS-based tests), the [command line](#method-2-command-line) (useful for non-NodeJS tests), or on-the-fly using Interfake's [HTTP meta-API](#method-2-command-line) (also useful for non-NodeJS tests). Based on [express](https://github.com/visionmedia/express).\n\n## Method 1: JavaScript\n\nMake sure you've install Interfake as a local module using `npm install interfake --save`. If you `var Interfake = require('interfake')` in your JavaScript file, you can use the following API to spin up the Interfake server.\n\n### API\n\n* `new Interfake(options)`: creates an Interfake object. Options are:\n  * `debug`: If `true`, outputs lots of annoying but helpful log messages. Default is `false`.\n* `#createRoute(route)`: Takes a JSON object with `request`, `response` and optionally `afterResponse` properties\n* `#listen(port)`: Takes a port and starts the server\n* `#stop()`: Stops the server if it's been started\n\n#### Fluent Interface\n\n* `#get|post|put|delete(url)`: Create an endpoint at the specified URL. Can then be followed by each of the following, which can follow each other too e.g. `get().body().status().body()`\n  * `#status(statusCode)`: Set the response status code for the endpoint\n  * `#body(body)`: Set the JSON response body of the end point\n  * `#create#get|post|put|delete(url)`: Specify an endpoint to create *after* the first execution of this one. API is the same as above.\n\n### Example ([more examples](/examples-javascript))\n\n```javascript\nvar Interfake = require('interfake');\n\nvar interfake = new Interfake();\n\n// Create endpoints using the fluent interface\ninterfake.post('/items').status(201).body({ created: true }).creates.get('/next-items').status(200).body([ { id: 1, name: 'the thing' } ]);\n\n// Or using the more verbose JSON syntax (more on this below under 'command line')\ninterfake.createRoute({\n\trequest: {\n\t\turl: '/whats-next',\n\t\tmethod: 'get'\n\t},\n\tresponse: {\n\t\tcode: 200, // HTTP Status Code\n\t\tdelay: 50, // Delay in milliseconds\n\t\tbody: { // JSON Body Response\n\t\t\tnext:'more stuff'\n\t\t}\n\t}\n});\n\ninterfake.listen(3000); // The server will listen on port 3000\n```\n\n### API\n\n* `new Interfake(options)`: creates an Interfake object. Options are:\n  * `debug`: If `true`, outputs lots of annoying but helpful log messages. Default is `false`.\n* `#createRoute(route)`: Takes a JSON object with `request`, `response` and optionally `afterResponse` properties\n* `#listen(port)`: Takes a port and starts the server\n* `#stop()`: Stops the server if it's been started\n* `#serveStatic(path, directory)`: Serve static (usually a website) files from a certain path. This is useful for testing [SPAs](http://en.wikipedia.org/wiki/Single-page_application). ([Example use.](/examples-javascript/fluent-web-page-test.js))\n\n#### Fluent Interface\n\n* `#get|post|put|delete(url)`: Create an endpoint at the specified URL. Can then be followed by each of the following, which can follow each other too e.g. `get().body().status().body()`\n  * `#status(statusCode)`: Set the response status code for the endpoint\n  * `#body(body)`: Set the JSON response body of the end point\n  * `#delay(milliseconds)`: Set the number of milliseconds to delay the response by to mimic network of processing lag\n  * `#create#get|post|put|delete(url)`: Specify an endpoint to create *after* the first execution of this one. API is the same as above.\n\n## Method 2: Command line\n\nInterfake must be install globally for the command line interface to work:\n\n```\nnpm install interfake -g\n```\n\nA JSON array of request/response pairs (\"endpoints\") you can write APIs and run them multiple times using the global `interfake` executable, and the JSON syntax.\n\n### Example ([more examples](/examples-command-line))\n\nCreate a file called `adventuretime.json`:\n\n```JSON\n[\n\t{\n\t\t\"request\": {\n\t\t\t\"url\": \"/whattimeisit\",\n\t\t\t\"method\": \"get\"\n\t\t},\n\t\t\"response\": {\n\t\t\t\"code\": 200,\n\t\t\t\"delay\": 100,\n\t\t\t\"body\": {\n\t\t\t\t\"theTime\": \"Adventure Time!\",\n\t\t\t\t\"starring\": [\n\t\t\t\t\t\"Finn\",\n\t\t\t\t\t\"Jake\"\n\t\t\t\t],\n\t\t\t\t\"location\": \"ooo\"\n\t\t\t}\n\t\t}\n\t}\n]\n```\n\nThen run Interfake against it:\n\n```\ninterfake --file ./adventuretime.json\n```\n\nNow go to http://localhost:3000/whattimeisit in your web browser.\n\nThe above example will create a endpoint at `http://localhost:3000/whattimeisit` which returns a `200` and the body specified in the `response` object.\n\nThe top-level array should contain a list of endpoints (represented by request/response objects). The `request` object contains a URL and HTTP Method (GET/POST/PUT/DELETE/etc) to match against, and the `response` object contains an [HTTP Status Code](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes) (`code`) and `body` object, which is in itself a JSON object, and optional. This `body` is what will be returned in the body of the response for the request you're creating.\n\nYou can create as many HTTP request/response pairs as you like. I've put some simple examples below for your copy & paste pleasure, or you can look in `/examples-command-line` for some more complex examples.\n\nRun `interfake --help` for a full list of command-line options.\n\n### Conditional endpoints\n\nWhen the API needs to mutate responses, such as after a POST, PUT or DELETE request, there is an `afterResponse` property available for any existing endpoint, which specifies endpoints to create after the parent has been hit for the first time.\n\n```JSON\n[\n\t{\n\t\t\"request\": {\n\t\t\t\"url\": \"/items\",\n\t\t\t\"method\": \"post\"\n\t\t},\n\t\t\"response\": {\n\t\t\t\"code\": 201,\n\t\t\t\"body\": {}\n\t\t},\n\t\t\"afterResponse\": {\n\t\t\t\"endpoints\": [\n\t\t\t\t{\n\t\t\t\t\t\"request\": {\n\t\t\t\t\t\t\"url\": \"/items\",\n\t\t\t\t\t\t\"method\": \"get\"\n\t\t\t\t\t},\n\t\t\t\t\t\"response\": {\n\t\t\t\t\t\t\"code\": 200,\n\t\t\t\t\t\t\"body\": { items : [] }\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t]\n\t\t}\n\t}\n]\n```\n\nThe `afterResponse` property can be used as deep as you like in the endpoint hierarchy. For a complex example of the use of post-response endpoints, see the `/examples-command-line/crud.json` file in this repository.\n\n## Method 3: HTTP\n\nWhile the server is running, you can create new endpoints on-the-fly. You can make a POST request to `/_requests` with the same JSON structure that the command line interface accepts.\n\n### Example\n\nWhile Interfake is running, make this request using `curl`.\n\n```\ncurl -X POST -d '{ \"request\":{\"url\":\"/whattimeisit\", \"method\":\"get\"}, \"response\":{\"code\":200,\"body\":{ \"theTime\" : \"Adventure Time!\" } } }' http://localhost:3000/_requests --header \"Content-Type:application/json\"\n```\n\n## JSONP\n\nInterfake supports [JSONP](http://en.wikipedia.org/wiki/JSONP). Just put `?callback` on the end of the URLs being called.\n\n```\ncurl http://localhost:3000/whattimeisit?callback=handleSomeJson\n```\n\n## Use Cases\n\n### Backend for a Mobile Application\n\nIf you'd like to develop an API-driven mobile application you might not yet have a finished API available. This is a perfect example of where Interfake is useful. You can quickly mock up some dummy APIs and work on the mobile application. In parallel, perhaps another developer will be creating the real API, or you could create it later.\n\n### Automated Testing\n\nYou can use Interfake to create dummy APIs which use data from your test setup with the HTTP method above, or by using a static set of test data. If you're writing your test suite using a NodeJS library, you can use the JavaScript API.\n\nThe HTTP API is particularly useful for developing iOS Applications which uses Automated tests written in JavaScript, or developing Node.js applications which rely on external APIs.\n\nFor an example of how to do this, please see the [web page test example](/examples-javascript/fluent-web-page-test.js).\n\n### Creating a static API\n\nIf you have a website or mobile application which only needs static data, deploy Interfake to a server somewhere with a JSON file serving up the data, and point your application at it.\n\n## Compatibility\n\nI tested this on my Mac. If you have trouble on Windows or any other platform, [raise an issue](https://github.com/basicallydan/interfake/issues).\n\n## Version History\n\n* 1.2.0: Added ability to do static files\n* 1.1.1: Fixed the response to `POST /_request` to be a 201, and `POST /_requests` is now the path used\n* 1.1.0: Added the fluent interface for easier creation of endpoints\n* 1.0.0: Backwards-incompatible changes for JavaScript API, now creating an `Interfake` instance\n* 0.2.0: Added JSONP support\n* 0.1.0: Support for creating mocked JSON APIs using HTTP, JavaScript or command line\n\n## Contribute\n\nInterfake is a labour of love, created for front-end and mobile developers to increase their prototyping and development speeds. If you can contribute by getting through some issues, I would be very grateful.\n\nIf you make any pull requests, please do try to write tests, or at the very least ensure they're still passing by running `npm test` before you do so.\n\n<3 Open Source!\n\n[![I Love Open Source](http://www.iloveopensource.io/images/logo-lightbg.png)](http://www.iloveopensource.io/projects/5319884587659fce66000943)\n\n## Dependencies\n\n* [express](https://github.com/visionmedia/express)\n* [commander](https://github.com/visionmedia/commander.js/)\n\n## Works well with\n\n* [Mocha](http://visionmedia.github.io/mocha/) - the test framework\n* [Zombie.js](http://zombie.labnotes.org/) - the Node.js-powered headless web browser\n\n## Thank yous\n\n[Alun](https://github.com/4lun) for reading this readme.\n\n## Author\n\n[Dan Hough](https://github.com/basicallydan) ([Twitter](https://twitter.com/basicallydan) | [Website](http://danielhough.co.uk))\n\n## Future work\n\n* Create a guide/some examples for how to integrate this with existing test frameworks, whether written in JavaScript or not\n* Improve the templating, so that a response might include a repeated structure with an incrementing counter or randomized data\n* Allow custom headers to be set\n* Mimic slow responses\n",
  "readmeFilename": "readme.md",
  "bugs": {
    "url": "https://github.com/basicallydan/interfake/issues"
  },
  "homepage": "https://github.com/basicallydan/interfake",
  "_id": "interfake@1.3.0",
  "_from": "interfake@^1.3.0"
}
